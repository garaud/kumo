
Kumo
####

**Kumo** means **cloud** in Japanese.

**Kumo** is a REST API application for requesting air quality stations data in
Europe. Data are provided in a GeoJSON_ format.

Produced in Python with FlaskREST_ and PostgreSQL_.

Clone this project with: ``git clone --recursive URL/kumo.git`` to also get the
kumo-ui_ repo as a submodule.

.. _GeoJSON: http://geojson.org/
.. _FlaskREST: https://flask-restful.readthedocs.org/en/0.3.3/
.. _PostgreSQL: http://www.postgresql.org/
.. _kumo-ui: https://gitlab.com/garaud/kumo-ui

Data
----

Data come from `Airbase Database
<http://acm.eionet.europa.eu/databases/airbase/airbasexml/index_html>`_ produced
by the `European Environment Agency <http://www.eea.europa.eu/>`_

Take a look at the ``data`` folder:

- ``get.py`` to download and extract the Airbase CSV file from the EEA website
- ``raw_to_csv.py``: read the raw Airbase CSV file then extract, transform and
  clean some data

**Kumo** decides to keep these data:

- code: the unique station code name
- country: the country where the station is
- height: altitude
- lat: latitude
- lon: longitude
- name: station name
- type: station type (background, industrial, traffic or unknown)

Create the *kumo* PostgreSQL database and execute the ``data/airbase.sql`` which
just does a ``COPY...FROM`` the ``airbase.csv`` file.

There are **8626 stations**.


Install
-------

There is a ``requirements.txt`` file.

- Flask
- flask-restful
- flask-restplus
- requests
- pandas
- psycopg2


API
---

Launch the ``kumo/app.py`` file to start the server.

Some examples:

::

   http localhost:5000/api/stations/42

::

   http localhost:5000/api/stations?country=France&type=traffic&limit=10

::

   http localhost:5000/api/countries/

::

   http localhost:5000/api/countries/Germany?limit=10

There is an API documentation generated by Swagger_ and the flask-restplus_
extension. Read this doc at ``localhost:5000/api/doc/``.

.. _Swagger: http://swagger.io/
.. _flask-restplus: http://flask-restplus.readthedocs.org/en/stable/

